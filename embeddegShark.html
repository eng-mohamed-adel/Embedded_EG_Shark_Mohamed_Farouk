<!doctype html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@900&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <title>Embedded EG — Mohamed Farouk</title>

  <style>
    /* Custom utilities not provided by CDN Tailwind quickly */
    :root{
      --bg-dark:#010308;
      --blue-1:#3b82f6;
      --blue-2:#124299;
    }

    html,body{
      height:100%;
      overflow-x: hidden; /* منع التمرير الأفقي */
    }
    body{
      font-family:'Poppins',system-ui,Arial;
      background:var(--bg-dark);
      color:#e6eefc;
      min-height: 100vh;
      width: 100%;
    }

    /* Glow text */
    .text-glow-soft{ 
      text-shadow:0 4px 18px rgba(59,130,246,0.15), 0 2px 6px rgba(18,66,153,0.12);
    }    

    /* Aurora background layers - تحسين للاستجابة */
    .aurora-wrap{
      position:fixed;
      inset:0;
      overflow:hidden;
      pointer-events:none;
      z-index:0
    }
    .aurora{
      position:absolute;
      filter:blur(100px);
      opacity:0.9;
      border-radius:50%;
      mix-blend-mode:screen
    }
    .aurora.a1{
      width:80vmax; /* استخدام وحدات نسبية */
      height:80vmax;
      left:-10%;
      top:-10%;
      background:radial-gradient(circle at 30% 30%, rgba(59,130,246,0.9), rgba(59,130,246,0.25) 30%, transparent 60%);
      animation:aur1 20s linear infinite
    }
    .aurora.a2{
      width:90vmax;
      height:90vmax;
      right:-15%;
      bottom:-15%;
      background:radial-gradient(circle at 70% 70%, rgba(18,66,153,0.85), rgba(18,66,153,0.22) 35%, transparent 65%);
      animation:aur2 20s linear infinite
    }

    @keyframes aur1{
      0%{transform:translate(0,0) scale(1)}
      25%{transform:translate(4%,2%) scale(1.06)}
      50%{transform:translate(0,4%) scale(1.03)}
      75%{transform:translate(-3%,-1%) scale(0.98)}
      100%{transform:translate(0,0) scale(1)}
    }
    @keyframes aur2{
      0%{transform:translate(0,0) scale(1)}
      25%{transform:translate(-4%,-2%) scale(0.96)}
      50%{transform:translate(0,-3%) scale(1.02)}
      75%{transform:translate(3%,1%) scale(1.05)}
      100%{transform:translate(0,0) scale(1)}
    }

    /* Particles container */
    .particles{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:1;
    }
    .particle{
      position:absolute;
      width:2px;
      height:2px;
      background:#fff;
      border-radius:999px;
      filter:drop-shadow(0 0 6px rgba(255,255,255,0.85));
      opacity:0.9
    }

    /* Splash screen */
    .splash{
      position:fixed;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      background:linear-gradient(180deg, rgba(1,3,8,1), rgba(1,3,8,0.98));
      z-index:40
    }
    .splash-inner{
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:18px
    }
    .logo-glow{
      box-shadow:0 15px 60px rgba(59,130,246,0.4), 0 0 40px rgba(59,130,246,0.25);
      border-radius:9999px;
      max-width: 80%; /* منع تجاوز الصورة للشاشة */
      height: auto;
    }

    /* Fade in up for splash elements */
    .fade-in-up{
      opacity:0;
      transform:translateY(10px);
      animation:fadeUp .9s ease forwards
    }
    .fade-in-up.delay{
      animation-delay:0.12s
    }
    @keyframes fadeUp{
      to{opacity:1;transform:translateY(0)}
    }

    /* Splash hide animation */
    .splash-hidden{
      opacity:0;
      transition:opacity .5s ease;
      pointer-events:none
    }

    /* Main content animations */
    .fade-blur-in{
      opacity:0;
      filter:blur(10px);
      transform:translateY(6px);
      animation:fadeBlurIn 1.5s cubic-bezier(.2,.9,.2,1) forwards
    }
    @keyframes fadeBlurIn{
      to{opacity:1;filter:blur(0);transform:translateY(0)}
    }

    /* Typing cursor */
    .cursor{
      display:inline-block;
      width:2px;
      height:1em;
      background:var(--blue-1);
      margin-left:6px;
      vertical-align:-0.18em;
      animation:blink 1s steps(2,start) infinite
    }
    @keyframes blink{
      50%{opacity:0}
    }

    /* Flash overlay */
    .flash{
      position:fixed;
      inset:0;
      background:linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.9) 50%, rgba(255,255,255,0) 100%);
      transform:scaleX(0);
      opacity:0;
      z-index:50
    }

    /* Buttons - تحسينات كبيرة */
    .btn {
      position: relative;
      overflow: hidden;
      transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
      border: none;
      background: linear-gradient(135deg, rgba(59, 130, 246, 0.15), rgba(18, 66, 153, 0.1));
      backdrop-filter: blur(10px);
      border: 1px solid rgba(59, 130, 246, 0.2);
      color: white;
      font-weight: 600;
      letter-spacing: 0.5px;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
      box-shadow: 
        0 4px 15px rgba(59, 130, 246, 0.15),
        0 1px 3px rgba(0, 0, 0, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
    }

    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, 
        transparent, 
        rgba(255, 255, 255, 0.2), 
        transparent);
      transition: left 0.6s ease;
    }

    .btn:hover {
      transform: translateY(-4px) scale(1.02);
      box-shadow: 
        0 10px 25px rgba(59, 130, 246, 0.3),
        0 5px 10px rgba(0, 0, 0, 0.15),
        inset 0 1px 0 rgba(255, 255, 255, 0.15);
      background: linear-gradient(135deg, rgba(59, 130, 246, 0.25), rgba(18, 66, 153, 0.15));
      border: 1px solid rgba(59, 130, 246, 0.4);
    }

    .btn:hover::before {
      left: 100%;
    }

    .btn:active {
      transform: translateY(-1px) scale(1.01);
      transition: all 0.1s ease;
    }

    /* تأثير إضافي للأزرار */
    .btn span {
      position: relative;
      z-index: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .btn .icon {
      transition: transform 0.3s ease;
    }

    .btn:hover .icon {
      transform: translateX(3px);
    }

    /* Modal styles - إصلاحات */
    .modal-backdrop{
      position:fixed;
      inset:0;
      background:rgba(1,3,8,0.8); /* زيادة العتامة */
      backdrop-filter:blur(6px);
      display:flex;
      align-items:center;
      justify-content:center;
      z-index:60;
      opacity:0;
      pointer-events:none;
      transition:opacity .25s ease;
    }
    .modal-backdrop.open{
      opacity:1;
      pointer-events:auto;
    }
    .modal{
      width:min(880px,95%);
      max-height:85vh;
      background:rgba(4,8,15,0.9); /* زيادة العتامة */
      backdrop-filter:blur(8px);
      border-radius:18px;
      padding:30px;
      position:relative;
      border:1px solid rgba(100,140,255,0.2); /* زيادة وضوح الحدود */
      box-shadow:0 10px 50px rgba(2,6,23,.8);
      margin: 20px;
      color: #e6eefc; /* تأكيد لون النص */
      transform: scale(0.9);
      transition: transform 0.3s ease, opacity 0.3s ease;
      opacity: 0;
    }
    .modal-backdrop.open .modal {
      transform: scale(1);
      opacity: 1;
    }
    .modal .glow-frame{
      position:absolute;
      inset:-6px;
      border-radius:20px;
      pointer-events:none;
      background:linear-gradient(90deg, rgba(59,130,246,0.15), rgba(18,66,153,0.12));
      filter:blur(8px);
      z-index: -1;
    }

    /* تحسين محتوى النافذة المنبثقة */
    .modal-content {
      position: relative;
      z-index: 1;
    }
    .modal-content p {
      margin-bottom: 1rem;
      line-height: 1.6;
    }
    .modal-content ul {
      margin-bottom: 1.5rem;
    }
    .modal-content li {
      margin-bottom: 0.5rem;
      display: flex;
      align-items: flex-start;
    }
    .modal-content .bullet {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: rgba(59,130,246,0.95);
      box-shadow: 0 0 8px rgba(59,130,246,0.8);
      margin-right: 12px;
      margin-top: 5px;
      flex-shrink: 0;
    }

    /* Footer pulse soft */
    @keyframes pulseSoft{
      0%{opacity:0.85}
      50%{opacity:0.65}
      100%{opacity:0.85}
    }
    .pulse-soft{
      animation:pulseSoft 2.2s ease-in-out infinite
    }

    /* Responsive typography helpers */
    .name-display{
      font-family:'Montserrat',sans-serif;
      letter-spacing:0.18em;
      word-wrap: break-word; /* منع تجاوز النص للحاوية */
      overflow-wrap: break-word;
    }

    /* تحسينات إضافية للاستجابة */
    @media (max-width: 768px) {
      /* جعل الخلفية أغمق في الموبايل */
      body {
        background: #00050f; /* خلفية أغمق قليلاً */
      }
      
      .splash {
        background:linear-gradient(180deg, #00050f, #00050f);
      }
      
      /* تكبير الاسم في الموبايل */
      #mainName {
        font-size: 3.5rem !important;
        line-height: 1.1;
        letter-spacing: 0.12em;
        margin-bottom: 1.5rem;
      }
      
      /* تقليل تأثيرات الخلفية في الموبايل */
      .aurora.a1, .aurora.a2 {
        filter: blur(60px);
        opacity: 0.7; /* تقليل الشفافية */
      }
      
      .modal {
        padding: 20px;
        margin: 10px;
      }
      
      .btn {
        padding: 14px 20px;
        font-size: 1.05rem;
      }
      
      /* تقليل تأثير الجسيمات في الموبايل */
      .particle {
        opacity: 0.6;
      }
      
      /* تحسين التباعد في الموبايل */
      #content {
        padding-top: 1rem;
        padding-bottom: 1rem;
      }
      
      #buttons {
        margin-top: 1rem;
      }
    }

    @media (max-width: 480px) {
      /* تكبير الاسم أكثر في الشاشات الصغيرة جداً */
      #mainName {
        font-size: 3rem !important;
        letter-spacing: 0.1em;
      }
      
      /* تحسين الأرورا للشاشات الصغيرة */
      .aurora.a1 {
        width: 100vmax;
        height: 100vmax;
        left: -20%;
        top: -15%;
      }
      
      .aurora.a2 {
        width: 110vmax;
        height: 110vmax;
        right: -25%;
        bottom: -20%;
      }
      
      /* تكبير النص المكتوب */
      #typed {
        font-size: 1.3rem !important;
        margin-bottom: 1rem;
      }
      
      /* تحسين الأزرار للشاشات الصغيرة */
      .btn {
        padding: 16px 20px;
        font-size: 1.1rem;
      }
      
      /* تحسين التباعد العام */
      #content {
        padding: 0.5rem;
      }
      
      #nameWrap {
        margin-bottom: 2rem;
      }
      
      .modal {
        padding: 15px;
      }
    }

    @media (min-width: 1200px) {
      .aurora.a1 {
        width: 70vmax;
        height: 70vmax;
      }
      
      .aurora.a2 {
        width: 80vmax;
        height: 80vmax;
      }
    }
  </style>
</head>
<body>

  <!-- Aurora + Particles -->
  <div class="aurora-wrap" aria-hidden="true">
    <div class="aurora a1"></div>
    <div class="aurora a2"></div>
  </div>

  <div class="particles" id="particles" aria-hidden="true"></div>

  <!-- Splash Screen -->
  <div id="splash" class="splash">
    <div class="splash-inner">
      <img src="https://i.postimg.cc/7hRjFwpf/Logo-EMBEDDED.png" alt="Embedded EG" width="160" height="160" class="logo-glow" style="max-width: 160px; width: 100%;" />
      <div class="text-center">
        <div class="uppercase tracking-widest text-sm text-slate-300 text-glow-soft fade-in-up delay">Embedded EG</div>
      </div>
    </div>
  </div>

  <!-- Flash overlay used for the name flash -->
  <div id="flash" class="flash" aria-hidden="true"></div>

  <!-- Main content -->
  <main id="main" class="min-h-screen flex items-center justify-center px-4 z-10" style="position:relative">
    <div class="w-full max-w-4xl text-center fade-blur-in" id="content">

      <!-- Typing line -->
      <div class="mb-6">
        <h2 id="typed" class="text-xl sm:text-2xl md:text-3xl font-semibold text-glow-soft" style="color:var(--blue-1);"></h2>
      </div>

      <!-- Name - تم تكبيره للشاشات الصغيرة -->
      <div id="nameWrap" class="mb-8 opacity-0">
        <h1 id="mainName" class="name-display text-4xl sm:text-5xl md:text-6xl lg:text-8xl font-black uppercase text-transparent bg-clip-text" style="background-image:radial-gradient(circle at 30% 30%, #9fd1ff, #63a7ff 30%, #0b3a8a 80%);">Mohamed Farouk</h1>
      </div>

      <!-- Buttons - تم تحسينها -->
      <div id="buttons" class="space-y-4 max-w-md mx-auto mt-2" style="transition:opacity .4s;opacity:0">
        <div class="flex flex-col gap-4">
          <button id="aboutBtn" class="btn rounded-full py-4 px-8 w-full text-white group">
            <span>
              <svg class="icon w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
              About the Academy
            </span>
          </button>

          <a href="https://eng-mohamed-adel.github.io/Embedded_EG/" target="_blank" rel="noopener noreferrer" class="btn rounded-full py-4 px-8 w-full text-white inline-flex items-center justify-center group">
            <span>
              <svg class="icon w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9v-9m0-9v9m0 9c-5 0-9-4-9-9s4-9 9-9"></path>
              </svg>
              Official Website
            </span>
          </a>

          <a href="https://eng-mohamed-adel.github.io/Embedded_EG/Courses.html" target="_blank" rel="noopener noreferrer" class="btn rounded-full py-4 px-8 w-full text-white inline-flex items-center justify-center group">
            <span>
              <svg class="icon w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
              </svg>
              Academy Courses
            </span>
          </a>
        </div>
      </div>

      <!-- Footer -->
      <footer class="mt-12">
        <div class="text-sm text-sky-200/40 pulse-soft"># Embedded EG</div>
      </footer>

    </div>
  </main>

  <!-- Modal -->
  <div id="modalBackdrop" class="modal-backdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="glow-frame"></div>
      <div class="flex justify-between items-start mb-4">
        <button id="langBtn" aria-label="Toggle language" class="p-2 rounded-md transition-colors hover:bg-blue-500/20">🌐</button>
        <button id="closeModal" aria-label="Close modal" class="text-xl p-2 transition-colors hover:bg-blue-500/20 rounded-md">✕</button>
      </div>

      <div class="modal-content">
        <h3 id="modalTitle" class="text-2xl font-semibold mb-4"></h3>
        <div id="modalContent" class="overflow-auto" style="max-height:62vh;padding-right:6px"></div>
      </div>
    </div>
  </div>

  <script>
    /* ======== Particles (100) ======== */
    (function(){
      const container = document.getElementById('particles');
      // تحديد عدد الجسيمات بناءً على حجم الشاشة
      const vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);
      const count = vw < 768 ? 50 : 100; // تقليل الجسيمات للشاشات الصغيرة
      
      const vh = Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0);

      for(let i=0;i<count;i++){
        const p = document.createElement('div');
        p.className='particle';
        const size = 1+Math.random()*3; // 1-4px
        p.style.width = size+'px'; p.style.height = size+'px';
        const left = Math.random()*100;
        const top = Math.random()*100 - 20; // allow some start above
        p.style.left = left+'%'; p.style.top = top+'%';

        const duration = 12 + Math.random()*18; // 12s - 30s
        const delay = -Math.random()*duration; // stagger
        p.style.transition = 'transform linear';

        // use CSS animation via style element per particle
        const animName = 'fallAnim'+i;
        const keyframes = `@keyframes ${animName}{ from{transform:translateY(0)} to{transform:translateY(${vh+200}px)} }`;
        const styleEl = document.createElement('style');
        styleEl.innerHTML = keyframes;
        document.head.appendChild(styleEl);
        p.style.animation = `${animName} ${duration}s linear ${delay}s infinite`;
        container.appendChild(p);
      }
    })();

    /* ===== Splash handling (2s) ===== */
    (function(){
      const splash = document.getElementById('splash');
      const main = document.getElementById('content');
      const buttons = document.getElementById('buttons');
      const nameWrap = document.getElementById('nameWrap');
      // keep splash for 2s then fade
      setTimeout(()=>{
        splash.classList.add('splash-hidden');
        setTimeout(()=>{ splash.style.display='none'; },550);
        // reveal main content after splash hide
        main.classList.add('fade-blur-in');
      },2000);

    })();

    /* ===== Typing animation ===== */
    (function(){
      const text = 'Welcome to the shark.';
      const target = document.getElementById('typed');
      const cursor = document.createElement('span'); cursor.className='cursor';
      target.appendChild(cursor);
      let i=0;
      function type(){
        if(i<text.length){
          cursor.insertAdjacentText('beforebegin', text[i]);
          i++;
          setTimeout(type,100);
        } else {
          // typing done
          cursor.style.display='none';
          // show name with flash
          revealNameAndButtons();
        }
      }
      // start typing slightly after splash removed (so it syncs). Start at 2.05s
      setTimeout(()=>{ type(); },2050);

      function revealNameAndButtons(){
        const nameWrap = document.getElementById('nameWrap');
        const buttons = document.getElementById('buttons');
        const flash = document.getElementById('flash');
        // flash effect
        flash.style.transition='none'; flash.style.opacity='1'; flash.style.transform='scaleX(0)';
        flash.style.display='block';
        // animate in quickly
        requestAnimationFrame(()=>{
          flash.style.transition='transform .28s ease, opacity .3s ease';
          flash.style.transform='scaleX(1)'; flash.style.opacity='1';
          setTimeout(()=>{ flash.style.opacity='0'; flash.style.transform='scaleX(0)'; },220);
        });

        // show name
        setTimeout(()=>{
          nameWrap.style.transition='opacity .18s ease'; nameWrap.style.opacity='1';
        },260);

        // show buttons after 900ms
        setTimeout(()=>{
          buttons.style.opacity='1';
        },900);
      }

    })();

    /* ===== Modal + language toggle ===== */
    (function(){
      const aboutBtn = document.getElementById('aboutBtn');
      const modalBackdrop = document.getElementById('modalBackdrop');
      const closeModal = document.getElementById('closeModal');
      const langBtn = document.getElementById('langBtn');
      const modalTitle = document.getElementById('modalTitle');
      const modalContent = document.getElementById('modalContent');

      let lang = 'en';
      const en = {
        title: 'About Embedded EG Academy',
        content: `
          <p>Embedded EG Academy is a specialized academy for teaching children programming with true understanding, not just memorization.</p>
          
          <p>We provide a clear, personalized learning path through a series of connected courses that guide each child step by step from beginner to advanced levels.</p>
          
          <div class="mb-4">
            <div class="flex items-center gap-2 mb-2">
              <span>🔹</span>
              <span class="font-semibold">What we offer:</span>
            </div>
            <ul class="space-y-2">
              <li class="flex items-start"><span class="bullet mr-3"></span><span>Practical, hands-on learning.</span></li>
              <li class="flex items-start"><span class="bullet mr-3"></span><span>Fun projects and real-life applications.</span></li>
              <li class="flex items-start"><span class="bullet mr-3"></span><span>Skills in problem-solving, logic, and creativity.</span></li>
              <li class="flex items-start"><span class="bullet mr-3"></span><span>An inspiring environment that makes kids love technology.</span></li>
            </ul>
          </div>
          
          <div class="flex items-center gap-2">
            <span>🎯</span>
            <span class="font-semibold">Our vision:</span>
            <span>To build a new generation of young programmers ready to create and innovate for the future.</span>
          </div>
        `
      };
      
      const ar = {
        title: 'عن أكاديمية Embedded EG',
        content: `
          <p>أكاديمية Embedded EG هي أكاديمية متخصصة في تعليم الأطفال البرمجة بفهم حقيقي، وليس مجرد حفظ.</p>
          
          <p>نحن نقدم مسار تعليمي واضح ومخصص من خلال سلسلة من الدورات المتصلة التي ترشد كل طفل خطوة بخطوة من المستوى المبتدئ إلى المتقدم.</p>
          
          <div class="mb-4">
            <div class="flex items-center gap-2 mb-2">
              <span>🔹</span>
              <span class="font-semibold">ما نقدمه:</span>
            </div>
            <ul class="space-y-2">
              <li class="flex items-start"><span class="bullet mr-3"></span><span>التعلم العملي والتطبيقي.</span></li>
              <li class="flex items-start"><span class="bullet mr-3"></span><span>مشاريع ممتعة وتطبيقات واقعية.</span></li>
              <li class="flex items-start"><span class="bullet mr-3"></span><span>مهارات في حل المشكلات والمنطق والإبداع.</span></li>
              <li class="flex items-start"><span class="bullet mr-3"></span><span>بيئة ملهمة تجعل الأطفال يحبون التكنولوجيا.</span></li>
            </ul>
          </div>
          
          <div class="flex items-center gap-2">
            <span>🎯</span>
            <span class="font-semibold">رؤيتنا:</span>
            <span>لبناء جيل جديد من المبرمجين الصغار المستعدين للابتكار والإبداع من أجل المستقبل.</span>
          </div>
        `
      };

      function openModal(){
        modalBackdrop.classList.add('open');
        // إعادة تعيين المحتوى عند فتح النافذة
        renderLang();
      }
      
      function close(){
        modalBackdrop.classList.remove('open');
      }

      function renderLang(){
        if(lang==='en'){
          document.documentElement.lang='en';
          document.documentElement.dir = 'ltr';
          modalTitle.textContent = en.title;
          modalContent.innerHTML = en.content;
          modalContent.style.textAlign = 'left';
        } else {
          document.documentElement.lang='ar';
          document.documentElement.dir = 'rtl';
          modalTitle.textContent = ar.title;
          modalContent.innerHTML = ar.content;
          modalContent.style.textAlign = 'right';
        }
      }

      aboutBtn.addEventListener('click', openModal);
      closeModal.addEventListener('click', close);
      modalBackdrop.addEventListener('click', (e)=>{ 
        if(e.target===modalBackdrop) close(); 
      });
      langBtn.addEventListener('click', ()=>{ 
        lang = lang==='en'?'ar':'en'; 
        renderLang(); 
      });

      // initial render
      renderLang();

    })();

    /* Accessibility: allow ESC to close modal */
    window.addEventListener('keydown',(e)=>{ 
      if(e.key==='Escape'){ 
        const mb=document.getElementById('modalBackdrop'); 
        if(mb.classList.contains('open')) mb.classList.remove('open'); 
      } 
    });

    /* إعادة حساب الجسيمات عند تغيير حجم الشاشة */
    window.addEventListener('resize', function() {
      const container = document.getElementById('particles');
      container.innerHTML = ''; // مسح الجسيمات الحالية
      
      const vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);
      const count = vw < 768 ? 50 : 100;
      const vh = Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0);

      for(let i=0;i<count;i++){
        const p = document.createElement('div');
        p.className='particle';
        const size = 1+Math.random()*3;
        p.style.width = size+'px'; p.style.height = size+'px';
        const left = Math.random()*100;
        const top = Math.random()*100 - 20;
        p.style.left = left+'%'; p.style.top = top+'%';

        const duration = 12 + Math.random()*18;
        const delay = -Math.random()*duration;
        p.style.transition = 'transform linear';

        const animName = 'fallAnimResize'+i;
        const keyframes = `@keyframes ${animName}{ from{transform:translateY(0)} to{transform:translateY(${vh+200}px)} }`;
        const styleEl = document.createElement('style');
        styleEl.innerHTML = keyframes;
        document.head.appendChild(styleEl);
        p.style.animation = `${animName} ${duration}s linear ${delay}s infinite`;
        container.appendChild(p);
      }
    });
  </script>
</body>
</html>